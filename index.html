<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unidad Educativa "10 de Febrero"</title>
    <style>
        :root {
            --primary-color: #1a5276;
            --secondary-color: #3498db;
            --accent-color: #f39c12;
            --light-color: #ecf0f1;
            --dark-color: #2c3e50;
            --success-color: #27ae60;
            --warning-color: #e74c3c;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 1.5rem 0;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .logo-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 1rem;
        }
        
        .logo {
            width: 80px;
            height: 80px;
            background-color: white;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-right: 1rem;
            font-weight: bold;
            color: var(--primary-color);
            font-size: 1.5rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        h1 {
            font-size: 2.2rem;
            margin-bottom: 0.5rem;
        }
        
        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        nav {
            background-color: var(--dark-color);
            padding: 0.8rem 0;
        }
        
        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .nav-item {
            color: white;
            text-decoration: none;
            padding: 0.5rem 1.2rem;
            margin: 0 0.5rem;
            border-radius: 4px;
            transition: background-color 0.3s;
        }
        
        .nav-item:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }
        
        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 1.5rem;
        }
        
        .card {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .card h2 {
            color: var(--primary-color);
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--light-color);
        }
        
        .btn {
            display: inline-block;
            background-color: var(--secondary-color);
            color: white;
            padding: 0.7rem 1.5rem;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
            transition: background-color 0.3s;
            text-decoration: none;
        }
        
        .btn:hover {
            background-color: var(--primary-color);
        }
        
        .btn-warning {
            background-color: var(--warning-color);
        }
        
        .btn-warning:hover {
            background-color: #c0392b;
        }
        
        .btn-success {
            background-color: var(--success-color);
        }
        
        .btn-success:hover {
            background-color: #219653;
        }
        
        .form-group {
            margin-bottom: 1.2rem;
        }
        
        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }
        
        input, textarea, select {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
        }
        
        textarea {
            min-height: 120px;
            resize: vertical;
        }
        
        .alert {
            padding: 1rem;
            border-radius: 4px;
            margin-bottom: 1.5rem;
        }
        
        .alert-success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .alert-error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
        }
        
        .event-card {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            padding: 1.2rem;
            transition: transform 0.3s;
        }
        
        .event-card:hover {
            transform: translateY(-5px);
        }
        
        .event-title {
            font-size: 1.2rem;
            color: var(--primary-color);
            margin-bottom: 0.5rem;
        }
        
        .event-date {
            color: var(--accent-color);
            font-weight: bold;
            margin-bottom: 0.5rem;
        }
        
        .event-description {
            color: #666;
        }
        
        footer {
            background-color: var(--dark-color);
            color: white;
            text-align: center;
            padding: 2rem 0;
            margin-top: 3rem;
        }
        
        .admin-panel {
            background-color: #f8f9fa;
            border-left: 4px solid var(--accent-color);
            padding: 1.5rem;
            margin-top: 2rem;
        }
        
        .admin-panel h3 {
            color: var(--accent-color);
            margin-bottom: 1rem;
        }
        
        .hidden {
            display: none;
        }
        
        .loading {
            text-align: center;
            padding: 2rem;
        }
        
        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-left-color: var(--secondary-color);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        @media (max-width: 768px) {
            .grid {
                grid-template-columns: 1fr;
            }
            
            .nav-container {
                flex-direction: column;
                align-items: center;
            }
            
            .nav-item {
                margin: 0.3rem 0;
                width: 80%;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="logo-container">
            <div class="logo">UEF</div>
            <div>
                <h1>Unidad Educativa "10 de Febrero"</h1>
                <p class="subtitle">Formando líderes para el futuro</p>
            </div>
        </div>
    </header>
    
    <nav>
        <div class="nav-container">
            <a href="#inicio" class="nav-item">Inicio</a>
            <a href="#noticias" class="nav-item">Noticias</a>
            <a href="#eventos" class="nav-item">Eventos</a>
            <a href="#acerca" class="nav-item">Acerca de</a>
            <a href="#contacto" class="nav-item">Contacto</a>
        </div>
    </nav>
    
    <div class="container">
        <section id="inicio" class="card">
            <h2>Bienvenidos</h2>
            <p>La Unidad Educativa "10 de Febrero" es una institución comprometida con la excelencia académica y la formación integral de nuestros estudiantes. Nuestro objetivo es proporcionar un ambiente de aprendizaje estimulante que fomente el crecimiento intelectual, emocional y social.</p>
            <p>Contamos con un equipo docente altamente calificado y modernas instalaciones para garantizar la mejor educación para sus hijos.</p>
        </section>
        
        <section id="noticias" class="card">
            <h2>Noticias y Anuncios</h2>
            <div id="news-container">
                <div class="loading">
                    <div class="spinner"></div>
                    <p>Cargando noticias...</p>
                </div>
            </div>
        </section>
        
        <section id="eventos" class="card">
            <h2>Próximos Eventos</h2>
            <div id="events-container">
                <div class="loading">
                    <div class="spinner"></div>
                    <p>Cargando eventos...</p>
                </div>
            </div>
        </section>
        
        <section id="acerca" class="card">
            <h2>Acerca de Nosotros</h2>
            <p>Fundada en 1985, la Unidad Educativa "10 de Febrero" ha sido un pilar en la comunidad educativa por más de tres décadas. Nuestra misión es formar ciudadanos responsables, críticos y creativos, capaces de contribuir positivamente a la sociedad.</p>
            <p>Ofrecemos educación desde inicial hasta bachillerato, con énfasis en valores, tecnología y pensamiento crítico.</p>
        </section>
        
        <section id="contacto" class="card">
            <h2>Contacto</h2>
            <p>Estamos ubicados en Av. Principal #123, Ciudad.</p>
            <p>Teléfono: (123) 456-7890</p>
            <p>Email: info@ue10febrero.edu</p>
            <p>Horario de atención: Lunes a Viernes de 7:00 am a 4:00 pm</p>
        </section>
        
        <!-- Panel de Administración -->
        <section class="admin-panel">
            <h3>Panel de Administración</h3>
            <p>Utilice esta sección para agregar o modificar contenido que será visible para todos los visitantes.</p>
            
            <div class="form-group">
                <label for="admin-key">Clave de administración:</label>
                <input type="password" id="admin-key" placeholder="Ingrese la clave de administración">
                <button id="admin-login" class="btn" style="margin-top: 0.5rem;">Acceder</button>
            </div>
            
            <div id="admin-interface" class="hidden">
                <div class="form-group">
                    <h4>Agregar Noticia</h4>
                    <input type="text" id="news-title" placeholder="Título de la noticia">
                    <textarea id="news-content" placeholder="Contenido de la noticia"></textarea>
                    <button id="add-news" class="btn btn-success">Agregar Noticia</button>
                </div>
                
                <div class="form-group">
                    <h4>Agregar Evento</h4>
                    <input type="text" id="event-title" placeholder="Título del evento">
                    <input type="date" id="event-date">
                    <textarea id="event-description" placeholder="Descripción del evento"></textarea>
                    <button id="add-event" class="btn btn-success">Agregar Evento</button>
                </div>
                
                <div class="form-group">
                    <h4>Gestión de Contenido</h4>
                    <button id="clear-data" class="btn btn-warning">Eliminar Todo el Contenido</button>
                    <p><small>Nota: Esta acción eliminará todas las noticias y eventos.</small></p>
                </div>
                
                <div id="admin-message" class="alert hidden"></div>
            </div>
        </section>
    </div>
    
    <footer>
        <p>Unidad Educativa "10 de Febrero" &copy; 2023 - Todos los derechos reservados</p>
        <p>Sitio web desarrollado con ❤️ para la comunidad educativa</p>
    </footer>

    <script>
        // Configuración de JSONBin.io
        const JSONBIN_BASE_URL = 'https://api.jsonbin.io/v3/b';
        const BIN_ID = '663a9e62e41b4d34e4f8c4a5'; // ID del bin que crearemos
        const MASTER_KEY = '$2a$10$6HhMg/3KROXYe8e6p2qQ.O6t7eR5YQ6n5t8rR2vYV9sKfL1mN8pW2'; // Clave maestra para escritura
        
        // Estado de la aplicación
        let appData = {
            news: [],
            events: []
        };
        
        // Elementos del DOM
        const newsContainer = document.getElementById('news-container');
        const eventsContainer = document.getElementById('events-container');
        const adminLoginBtn = document.getElementById('admin-login');
        const adminInterface = document.getElementById('admin-interface');
        const addNewsBtn = document.getElementById('add-news');
        const addEventBtn = document.getElementById('add-event');
        const clearDataBtn = document.getElementById('clear-data');
        const adminMessage = document.getElementById('admin-message');
        
        // Clave de administración (puedes cambiarla)
        const ADMIN_PASSWORD = "admin123";
        
        // Inicializar la aplicación
        document.addEventListener('DOMContentLoaded', function() {
            loadData();
            setupEventListeners();
        });
        
        // Configurar event listeners
        function setupEventListeners() {
            adminLoginBtn.addEventListener('click', toggleAdminInterface);
            addNewsBtn.addEventListener('click', addNews);
            addEventBtn.addEventListener('click', addEvent);
            clearDataBtn.addEventListener('click', clearAllData);
        }
        
        // Cargar datos desde JSONBin
        async function loadData() {
            try {
                showLoading(newsContainer);
                showLoading(eventsContainer);
                
                const response = await fetch(`${JSONBIN_BASE_URL}/${BIN_ID}/latest`, {
                    method: 'GET',
                    headers: {
                        'X-Master-Key': MASTER_KEY,
                    }
                });
                
                if (!response.ok) {
                    throw new Error('Error al cargar los datos');
                }
                
                const data = await response.json();
                appData = data.record || { news: [], events: [] };
                
                renderNews();
                renderEvents();
            } catch (error) {
                console.error('Error cargando datos:', error);
                // Si hay error, usar datos por defecto
                appData = { news: [], events: [] };
                renderNews();
                renderEvents();
                showMessage('Error al cargar los datos. Mostrando contenido local.', 'error');
            }
        }
        
        // Guardar datos en JSONBin
        async function saveData() {
            try {
                const response = await fetch(`${JSONBIN_BASE_URL}/${BIN_ID}`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-Master-Key': MASTER_KEY,
                    },
                    body: JSON.stringify(appData)
                });
                
                if (!response.ok) {
                    throw new Error('Error al guardar los datos');
                }
                
                return true;
            } catch (error) {
                console.error('Error guardando datos:', error);
                return false;
            }
        }
        
        // Mostrar noticias
        function renderNews() {
            newsContainer.innerHTML = '';
            
            if (appData.news.length === 0) {
                newsContainer.innerHTML = '<p>No hay noticias disponibles en este momento.</p>';
                return;
            }
            
            appData.news.forEach((newsItem, index) => {
                const newsElement = document.createElement('div');
                newsElement.className = 'card';
                newsElement.innerHTML = `
                    <h3>${newsItem.title}</h3>
                    <p>${newsItem.content}</p>
                    <p><small>Publicado: ${new Date(newsItem.timestamp).toLocaleDateString()}</small></p>
                `;
                newsContainer.appendChild(newsElement);
            });
        }
        
        // Mostrar eventos
        function renderEvents() {
            eventsContainer.innerHTML = '';
            
            if (appData.events.length === 0) {
                eventsContainer.innerHTML = '<p>No hay eventos programados en este momento.</p>';
                return;
            }
            
            const eventsGrid = document.createElement('div');
            eventsGrid.className = 'grid';
            
            appData.events.forEach((event, index) => {
                const eventElement = document.createElement('div');
                eventElement.className = 'event-card';
                eventElement.innerHTML = `
                    <div class="event-title">${event.title}</div>
                    <div class="event-date">${new Date(event.date).toLocaleDateString()}</div>
                    <div class="event-description">${event.description}</div>
                `;
                eventsGrid.appendChild(eventElement);
            });
            
            eventsContainer.appendChild(eventsGrid);
        }
        
        // Mostrar estado de carga
        function showLoading(container) {
            container.innerHTML = `
                <div class="loading">
                    <div class="spinner"></div>
                    <p>Cargando...</p>
                </div>
            `;
        }
        
        // Mostrar mensaje
        function showMessage(message, type = 'success') {
            adminMessage.textContent = message;
            adminMessage.className = `alert alert-${type}`;
            adminMessage.classList.remove('hidden');
            
            setTimeout(() => {
                adminMessage.classList.add('hidden');
            }, 5000);
        }
        
        // Alternar interfaz de administración
        function toggleAdminInterface() {
            const adminKey = document.getElementById('admin-key').value;
            
            if (adminKey === ADMIN_PASSWORD) {
                adminInterface.classList.remove('hidden');
                adminLoginBtn.textContent = 'Cerrar Sesión';
                adminLoginBtn.removeEventListener('click', toggleAdminInterface);
                adminLoginBtn.addEventListener('click', closeAdminInterface);
                showMessage('Sesión de administrador iniciada correctamente.', 'success');
            } else {
                showMessage('Clave de administración incorrecta.', 'error');
            }
        }
        
        // Cerrar interfaz de administración
        function closeAdminInterface() {
            adminInterface.classList.add('hidden');
            adminLoginBtn.textContent = 'Acceder';
            adminLoginBtn.removeEventListener('click', closeAdminInterface);
            adminLoginBtn.addEventListener('click', toggleAdminInterface);
            document.getElementById('admin-key').value = '';
        }
        
        // Agregar noticia
        async function addNews() {
            const title = document.getElementById('news-title').value.trim();
            const content = document.getElementById('news-content').value.trim();
            
            if (!title || !content) {
                showMessage('Por favor, complete todos los campos.', 'error');
                return;
            }
            
            const newNews = {
                id: Date.now(),
                title: title,
                content: content,
                timestamp: new Date().toISOString()
            };
            
            appData.news.unshift(newNews);
            
            const saved = await saveData();
            
            if (saved) {
                renderNews();
                document.getElementById('news-title').value = '';
                document.getElementById('news-content').value = '';
                showMessage('Noticia agregada correctamente.', 'success');
            } else {
                showMessage('Error al guardar la noticia.', 'error');
                // Revertir cambios locales si no se pudo guardar
                appData.news.shift();
            }
        }
        
        // Agregar evento
        async function addEvent() {
            const title = document.getElementById('event-title').value.trim();
            const date = document.getElementById('event-date').value;
            const description = document.getElementById('event-description').value.trim();
            
            if (!title || !date || !description) {
                showMessage('Por favor, complete todos los campos.', 'error');
                return;
            }
            
            const newEvent = {
                id: Date.now(),
                title: title,
                date: date,
                description: description
            };
            
            appData.events.push(newEvent);
            
            // Ordenar eventos por fecha
            appData.events.sort((a, b) => new Date(a.date) - new Date(b.date));
            
            const saved = await saveData();
            
            if (saved) {
                renderEvents();
                document.getElementById('event-title').value = '';
                document.getElementById('event-date').value = '';
                document.getElementById('event-description').value = '';
                showMessage('Evento agregado correctamente.', 'success');
            } else {
                showMessage('Error al guardar el evento.', 'error');
                // Revertir cambios locales si no se pudo guardar
                appData.events.pop();
            }
        }
        
        // Eliminar todos los datos
        async function clearAllData() {
            if (confirm('¿Está seguro de que desea eliminar todas las noticias y eventos? Esta acción no se puede deshacer.')) {
                appData.news = [];
                appData.events = [];
                
                const saved = await saveData();
                
                if (saved) {
                    renderNews();
                    renderEvents();
                    showMessage('Todos los datos han sido eliminados.', 'success');
                } else {
                    showMessage('Error al eliminar los datos.', 'error');
                }
            }
        }
    </script>
</body>
</html>